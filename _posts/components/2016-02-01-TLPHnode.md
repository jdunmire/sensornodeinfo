---
layout: component
title:  "TLPH Node"
summary: "Battery powered node to measure temperature, light levels, pressure, and humdity."
started: 2016-02-01
date:   2016-02-02
status: dev
repository: https://github.com/jdunmire/TLPHnode
commentIssueId: 8
permalink: /component/tlphnode/
categories:
- component
- Hardware
img: ComingSoon.png
thumb: ComingSoon_70x53.png

---
#### Concept
  * Simple
  * Low cost
  * Battery operated
  * Smaller than [TLnode][TLnode]

This node adds pressure and humidity sensors to the
[TLnode][TLnode] and reduces the PCB size. The
[TLnode][TLnode] PCB size was chosen to match the 2-AA
battery holder. The concept this time will be to minimize the PCB size
and use pads to connect to the battery. This will reduce the cost of the
PCB and allow more flexibility in choosing a battery holder.

As with the [TLnode][TLnode], the PCB will be designed using
[KiCad](http://kicad-pcb.org/).  Full schematics for the T&L Node are
available on [GitHub](https://github.com/jdunmire/TLPHnode).

[TLnode]: /component/tlnode/

#### CPU
This node will be designed for the [same CPU][ESP8266] as the
[TLnode][TLnode], though it may be built with the [ESP-12F][ESP12F].
The [ESP-12F][ESP12F] brings out some additional pins, but they are
useful only for direct access to the flash memory and are not useful for
this node. The ESP-12E and ESP-12F have the same pinout. The ESP-12E
does not appear to be in production at this time (2016/02/01).

Some of the places ESP-12F can be purchased:

  * [Itead Studio](https://www.itead.cc/esp-12f.html)
  * [Bang good](http://www.banggood.com/ESP8266-ESP-12F-Remote-Serial-Port-WIFI-Transceiver-Wireless-Module-p-1007260.html)
  * [Adafruit](https://www.adafruit.com/products/2491)(ESP-12E)
  * [Amazon](http://www.amazon.com/s/ref=nb_sb_noss_1?url=search-alias%3Daps&field-keywords=esp8266+esp-12f&rh=i%3Aaps%2Ck%3Aesp8266+esp-12f)

[ESP8266]: https://en.wikipedia.org/wiki/ESP8266 "wiki: ESP8266"
[ESP12F]: http://www.esp8266.com/wiki/doku.php?id=esp8266-module-family#esp-12-e

#### Temperature
Both the pressure and the humidity sensors have built-in temperature
sensors, so a separate device is not needed.

#### Light
The light sensor is an Intersil [ISL29035][ISL]. It was chosen because
it has an I2C interface, its power supply range (2.25V-3.63V) and
relatively low cost ($1.67 from
[DigiKey](https://www.digikey.com/product-detail/en/ISL29035IROZ-T7/ISL29035IROZ-T7CT-ND/4499886).

This is the same sensor that I used for the [TLnode][TLnode].

[ISL]: http://www.intersil.com/en/products/optoelectronics/ambient-light-sensors/light-to-digital-sensors/ISL29035.html

#### Pressure
For pressure I've chosen the [LPS25HB][LPS25HB]:

  * resolution: 0.01 hPa ~ 0.083m @ 15 degC
  * absolute accuracy: 0.2 hPa ~ 1.66m @ 15 degC
  * relative accuracy: 0.1 hPa ~ 0.83m @ 15 degC
  * 2.5 mm x 2.5 mm x 0.76 mm

I also considered these:

  * [MPL3115A2][MPL3115A2]
      * resolution: 1.5 Pa ~ 0.125m @ 15 degC
      * absolute accuracy: 0.4 kPa ~ 33.2m @ 15 degC
      * relative accuracy: 0.05 kPa ~ 4.16m @ 15 degC
      * 5.0 mm x 3.0 mm x 1.1 mm

  * [BMP280][BMP280]
      * resolution: 0.18 Pa ~ 0.015m @ 15 degC
      * absolute accuracy: 1 hPa ~ 8.3m @ 15 degC
      * relative accuracy: 0.12 hPa ~ 0.998 @ 15 degC
      * 2.0 mm x 2.5 mm x 0.95 mm

      This is the lowest price of these sensors ($2.72
      @ Mouser), but it requires scaling (ideally using 64-bit math) by
      the host CPU.

  * [NPA-201][NPA-201]
      * resolution: 0.15 mBar ~ 0.125m @ 15 degC
      * absolute accuracy: 0.2 mBar ~ 1.6m @ 15 degC
      * relative accuracy: 0.1 mBar ~ 0.8m @ 15 degC
      * 2.0 mm x 2.5 mm x 1.0 mm

One issue with all of thesee pressure sensors is that they are also light
sensitive. Some light blocking device (foam, baffles, ???) will be
needed.

[MPL3115A2]: http://www.nxp.com/products/sensors/pressure-sensors/barometric-pressure-15-to-115-kpa/20-to-110kpa-absolute-digital-pressure-sensor:MPL3115A2

[LPS25HB]: http://www.st.com/web/catalog/sense_power/FM89/SC1316/PF261381

[BMP280]: https://www.bosch-sensortec.com/en/homepage/products_3/environmental_sensors_1/bmp280/bmp280

[NPA-201]: http://www.amphenol-sensors.com/en/products/pressure-mems/mems-sensors/3236-npa-201

#### Humidity
[Si7006-A20(PDF)][Si7006] is the low end of a [family][Si70xx] of sensors
from Silicon Labs. The key characteristics that make it my choice are:

  * +/- 5% RH
  * 150 uA active current
  *  60 nA standby current
  * 3mm x 3mm x 1.21 mm
  * 1.9-3.6 V operating voltage.

I plan to use the `-IM1` version which has a factory installed cover.

[Si7006]: http://www.silabs.com/Support%20Documents/TechnicalDocs/Si7006-A20.pdf
[Si70xx]: http://www.silabs.com/products/sensors/humidity-sensors/Pages/si7013-20-21.aspx

#### Power
After looking at regulator options, I've decided to stay with the
[TLnode][tlnode] choice and use battery power. However, I am not going
to base the design on a 2-AA size holder and Alkaline batteries.

The battery of choice will be one using [LiFePO4][LiFeP04] chemistry.
The power density is not as good as Li-polymer or even alkaline, but the
[voltage curve(PDF)][LiFeP04_18650_spec] is a better match to the components
selected.

There are a number of battery vendors that carry the [LiFePO4][LiFeP04]
batteries. I purchased mine from [AA Portable Power Corp][batteryspace].
I used the AA size for the [TLnode][tlnode], but the
[18650 size][batterySizes] is not
much larger and is available with up to [2.5 times][LiFeP04_1500mAh] the
capacity of the [AA batteries][LiFeP04_600mAh].

[LiFeP04]: https://en.wikipedia.org/wiki/Lithium_iron_phosphate_battery
[LiFeP04_18650_spec]: http://docs-europe.electrocomponents.com/webdocs/12fd/0900766b812fdd11.pdf
[LiFeP04_1500mAh]: http://www.batteryspace.com/lifepo4-18650-rechargeable-cell-3-2v-1500-mah-8-4a-rate-4-32wh-ul-listed-un38-3-passed-ndgr.aspx
[LiFeP04_600mAh]: http://www.batteryspace.com/lifepo4-rechargeable-14505-cell-3-2v-600-mah-0-6a-rate-2-22wh-button-top-standard-aa-size-0-18----un38-3-passed-ndgr.aspx
[batterySizes]: https://en.wikipedia.org/wiki/List_of_battery_sizes
[batteryspace]: http://www.batteryspace.com/

#### Connectors
Rather than the pin headers used on the [TLnode][Tlnode] I am going to
use a FPC (Flexible Printed Circuit) [ribbon][FPC_cable] and
[connector][FPC_conn]. An adapter board will be used to expand to pin
headers that will fit a prototyping board.

[FPC_conn]: http://www.te.com/usa-en/product-1734839-5.html
[FPC_cable]: http://www.parlex.com/products/ffc.php "ZIF Flat Flexible Cable"
